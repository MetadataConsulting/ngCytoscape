!function(){"use strict";function e(e,t,n,a,o,r,i){function s(t){this._cytoGraph=e.defer(),this._getCytoscapeGraph=function(){return this._cytoGraph.promise},this._getCytoscapeScope=function(){return t}}function u(e,s,u,d){var c=t.isDefined,l=t.isEmpty;a.setDefaults(e.graphOptions,e.graphLayout,u.id,e.graphStyle),e.graphId=u.id;var p=new o(s[0],a.getGraphCreationDefaults(u.id));r.setEvents(p),d._cytoGraph.resolve(p),c(e.graphElements&&!l(e.graphElements))&&(i.addElements(e.graphElements,p,e),c(e.graphLayout)&&!l(e.graphLayout)&&p.layout(e.graphLayout)),e.$watch(function(){return s[0].offsetHeight},function(e,t){e!==t&&p.resize()}),e.$watch(function(){return s[0].offsetWidth},function(e,t){e!==t&&p.resize()}),p.ready(function(){n.setGraph(p,u.id)})}s.$inject=["$scope"];var d={restrict:"EA",replace:!0,scope:{graphElements:"=",graphLayout:"=",graphOptions:"=",graphStyle:"="},template:'<div class="ngCytoscape"></div>',controller:s,link:u};return d}angular.module("ngCytoscape",[]).directive("cytoscape",e),e.$inject=["$q","cytoHelpers","cytoData","cytoGraphDefaults","CytoscapeGraph","cytoEvents","cytoElementsHelpers"]}(),function(){"use strict";function e(e,t){function n(t,n,a,o){function r(n,a){if(0===n.length&&d.nodes().forEach(function(e){d.remove(e)}),0===d.elements().length)i(n);else{var o={},r={};d.elements().each(function(e,t){o[t.id()]=1});var u=[];e.asyncEach(n,function(e,n){if(r[e.data.id]=e.data.id,e.data&&e.data.id)if(o[e.data.id]){var a=d.nodes("#"+e.data.id);a.data()!==e.data&&a.data(e.data)}else u.push(s(e,d,t));else u.push(s(e,d,t))}).then(function(){0===u.length?d.elements().each(function(e,t){if(!r[t.id()]){var a=t.neighborhood("edge").jsons(),o={};angular.forEach(a,function(e,t){o[e.data.id]=e.data.id});for(var i=n.length;i--;)o[n[i].data.id]&&n.splice(i,1);d.remove("#"+t.id())}}):d.add(u),d.style().update(),d.elements(":visible").layout(c.graphLayout||{name:"grid"}),d.resize()})}}function i(t){u(t)&&e.asyncEach(t,function(e){"nodes"===e.group?s(e):"edges"===e.group&&s(e)}).then(function(){d.add(t),d.elements(":visible").layout(c.graphLayout||{name:"grid"})})}function s(e){return t.$watchCollection(function(){return e.data},function(e,t){if(console.log("fired"),e!==t){var n=d.getElementById(e.id);n.data(e)}}),e}function u(e){var t={},n=[],a=0;return angular.forEach(e,function(e,o){e.hasOwnProperty("data")?e.data.hasOwnProperty("id")?(n.push(e),"nodes"===e.group&&(t[e.data.id]=e.data.id)):(a++,$log.error("Elements require an id property")):(a++,$log.error("Elements require a data property"))}),angular.forEach(n,function(e){"nodes"!==e.group&&(e.data.hasOwnProperty("target")||(a++,$log.error("Edges require a target")),e.data.hasOwnProperty("target")||(a++,$log.error("Edges require a target")),t[e.data.target]||(a++,$log.error("Edges require a target node.")),t[e.data.source]||(a++,$log.error("Edges require a source node.")))}),a>0?!1:!0}var d,c=o._getCytoscapeScope(),l=e.isDefined;o._getCytoscapeGraph().then(function(e){d=e}),t.$watchCollection(function(){return c.graphElements},function(e,t){l(e)&&e!==t&&r(e,t)})}var a={restric:"A",require:"^cytoscape",link:n};return a}angular.module("ngCytoscape").directive("graphElements",e),e.$inject=["cytoHelpers","cytoElementsHelpers"]}(),function(){"use strict";function e(e,t){function n(n,a,o,r){var i,s,u=(e.isDefined,t.getDefaultLayouts()),d=u.grid;s=r._getCytoscapeScope(),r._getCytoscapeGraph().then(function(e){i=e}),n.$watch(function(){return s.graphLayout},function(e,t){e!=t&&i.elements().length>0&&i.elements(":visible").layout(s.graphLayout||d)},!0)}var a={restrict:"A",require:"^cytoscape",link:n};return a}angular.module("ngCytoscape").directive("graphLayout",e),e.$inject=["cytoHelpers","cytoLayoutDefaults"]}(),function(){"use strict";function e(){var e={restrict:"A",require:"^cytoscape",link:function(e,t,n,a){var o={};a._getCytoscapeGraph().then(function(e){o=e});var r=a._getCytoscapeScope();r.$watch(function(){return r.graphStyle},function(e,t){e!==t&&o.style(e)},!0)}};return e}angular.module("ngCytoscape").directive("graphStyle",e)}(),function(){"use strict";function e(){var e=function(e,t,n){var a={container:e};return angular.isDefined(t)&&null!==t&&angular.extend(a,t),cytoscape(a)};return e}angular.module("ngCytoscape").factory("CytoscapeGraph",e)}(),function(){"use strict";function e(e){var t=e.getDefer,n=e.getUnresolvedDefer,a=e.setResolvedDefer,o={};o.Graph={};var r=this;r.setGraph=function(e,t){var r=n(o.Graph,t);r.resolve(e),a(o.Graph,t)},r.getGraph=function(e){var n=t(o.Graph,e);return n.promise}}angular.module("ngCytoscape").service("cytoData",e),e.$inject=["cytoHelpers"]}(),function(){"use strict";function e(e,t){function n(e,t,n){for(var a in e){var o=e[a];("nodes"===o.group||"edges"===o.group)&&r(o,t,n)}}function a(t,n,a,i){if(0===t.length&&a.nodes().forEach(function(e){a.remove(e)}),0===a.elements().length)o(t,a,i);else{var s={},u={};a.elements().each(function(e,t){s[t.id()]=1});var d=[];e.asyncEach(t,function(e,t){if(console.log("asyncStarted"),u[e.data.id]=e.data.id,e.data&&e.data.id)if(s[e.data.id]){var n=a.nodes("#"+e.data.id);n.data()!==e.data&&n.data(e.data)}else d.push(r(e,a,i));else d.push(r(e,a,i))}).then(function(){0===d.length?a.elements().each(function(e,n){if(!u[n.id()]){var o=n.neighborhood("edge").jsons(),r={};angular.forEach(o,function(e,t){r[e.data.id]=e.data.id});for(var i=t.length;i--;)r[t[i].data.id]&&t.splice(i,1);a.remove("#"+n.id())}}):a.add(d),a.style().update(),a.resize()})}}function o(t,n,a){i(t)&&e.asyncEach(t,function(e,t){"nodes"===e.group?r(e,n,a):"edges"===e.group&&r(e,n,a)}).then(function(){n.add(t),n.elements(":visible").layout(a.graphLayout||{name:"cose"})})}function r(e,t,n){return n.$parent.$watch(e.data.rank,function(e,n){if(e!==n){var a=t.getElementById(e.id);a.data(e)}},!0),e}function i(e){var n={},a=[],o=0;return angular.forEach(e,function(e,r){e.hasOwnProperty("data")?e.data.hasOwnProperty("id")?(a.push(e),"nodes"===e.group&&(n[e.data.id]=e.data.id)):(o++,t.error("Elements require an id property")):(o++,t.error("Elements require a data property"))}),angular.forEach(a,function(e){"nodes"!==e.group&&(e.data.hasOwnProperty("target")||(o++,t.error("Edges require a target")),e.data.hasOwnProperty("target")||(o++,t.error("Edges require a target")),n[e.data.target]||(o++,t.error("Edges require a target node.")),n[e.data.source]||(o++,t.error("Edges require a source node.")))}),o>0?!1:!0}var s={initElements:n,addElements:o,processChange:a};return s}angular.module("ngCytoscape").factory("cytoElementsHelpers",e),e.$inject=["cytoHelpers","$log"]}(),function(){"use strict";function e(){return["mousedown","mouseup","click","mouseover","mouseout","mousemove","touchstart","touchmove","touchend","add","remove","select","unselect","lock","unlock","grab","drag","free","position","data","scratch","style","layoutstart","layoutready","layoutstop","load","ready","initrender","done","pan","zoom","tapstart","tapdrag","tapdragover","tapdragout","tapend","tap","taphold","cxttapstart","cxttapend","cxttap","cxtdrag","cxtdragover","cxtdragout"]}function t(t){function n(n){for(var a=e(),o=0;o<a.length;o++)n.on(a[o],function(e){if(e.cyTarget===n){var a=e.cyTarget;t.$broadcast("cytoEvent:graph:"+e.type,a,e)}else t.$broadcast("cytoEvent:core:"+e.type,e)}),n.on(a[o],"node",function(e){var n=e.cyTarget;t.$broadcast("cytoEvent:node:"+e.type,n,e)}),n.on(a[o],"edge",function(e){var n=e.cyTarget;t.$broadcast("cytoEvent:edge:"+e.type,n,e)})}var a={setEvents:n};return a}angular.module("ngCytoscape").factory("cytoEvents",t),t.$inject=["$rootScope","$timeout"]}(),function(){"use strict";function e(){return{zoom:1,pan:{x:0,y:0},minZoom:1e-50,maxZoom:1e50,zoomingEnabled:!0,userZoomingEnabled:!0,panningEnabled:!0,userPanningEnabled:!0,boxSelectionEnabled:!1,selectionType:"single",touchTapThreshold:8,desktopTapThreshold:4,autolock:!1,autoungrabify:!1,autounselectify:!1,headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,wheelSensitivity:1,pixelRatio:1}}function t(t){function n(e){var t=i(s,e);return s[t]}function a(e){var t=i(s,e),n=s[t],a={zoom:n.zoom,pan:n.pan,minZoom:n.minZoom,maxZoom:n.maxZoom,zoomingEnabled:n.zoomingEnabled,userZoomingEnabled:n.userZoomingEnabled,panningEnabled:n.panningEnabled,userPanningEnabled:n.userPanningEnabled,boxSelectionEnabled:n.boxSelectionEnabled,selectionType:n.selectionType,touchTapThreshold:n.touchTapThreshold,desktopTapThreshold:n.desktopTapThreshold,autolock:n.autolock,autoungrabify:n.autoungrabify,autounselectify:n.autounselectify,layout:n.layout,style:n.style,headless:n.headless,styleEnabled:n.styleEnabled,hideEdgesOnViewport:n.hideEdgesOnViewport,hideLabelsOnViewport:n.hideLabelsOnViewport,textureOnViewport:n.textureOnViewport,motionBlur:n.motionBlur,motionBlurOpacity:n.motionBlurOpacity,wheelSensitivity:n.wheelSensitivity,pixelRatio:n.pixelRatio};return a}function o(t,n,a,o){var u=e();r(t)&&(u.zoom=r(t.zoom)?t.zoom:u.zoom,u.scrollWheelZoom=r(t.scrollWheelZoom)?t.scrollWheelZoom:u.doubleClickZoom,u.minZoom=r(t.minZoom)?t.minZoom:u.minZoom,u.maxZoom=r(t.maxZoom)?t.maxZoom:u.maxZoom,u.zoomingEnabled=r(t.zoomingEnabled)?t.zoomingEnabled:u.zoomingEnabled,u.panningEnabled=r(t.panningEnabled)?t.panningEnabled:u.panningEnabled,u.userPanningEnabled=r(t.userPanningEnabled)?t.userPanningEnabled:u.userPanningEnabled,u.boxSelectionEnabled=r(t.boxSelectionEnabled)?t.boxSelectionEnabled:u.boxSelectionEnabled,u.selectionType=r(t.selectionType)?t.selectionType:u.selectionType,u.touchTapThreshold=r(t.touchTapThreshold)?t.touchTapThreshold:u.touchTapThreshold,u.desktopTapThreshold=r(t.desktopTapThreshold)?t.desktopTapThreshold:u.desktopTapThreshold,u.autolock=r(t.autolock)?t.autolock:u.autolock,u.autoungrabify=r(t.autoungrabify)?t.autoungrabify:u.autoungrabify,u.headless=r(t.headless)?t.headless:u.headless,u.styleEnabled=r(t.styleEnabled)?t.styleEnabled:u.styleEnabled,u.hideEdgesOnViewport=r(t.hideEdgesOnViewport)?t.hideEdgesOnViewport:u.hideEdgesOnViewport,u.hideLabelsOnViewport=r(t.hideLabelsOnViewport)?t.hideLabelsOnViewport:u.hideLabelsOnViewport,u.textureOnViewport=r(t.textureOnViewport)?t.textureOnViewport:u.textureOnViewport,u.motionBlur=r(t.motionBlur)?t.motionBlur:u.motionBlur,u.motionBlurOpacity=r(t.motionBlurOpacity)?t.motionBlurOpacity:u.motionBlurOpacity,u.wheelSensitivity=r(t.wheelSensitivity)?t.wheelSensitivity:u.wheelSensitivity,u.pixelRatio=r(t.pixelRatio)?t.pixelRatio:u.pixelRatio,u.style=r(o)?o:[],u.layout=r(n)?n:{},r(t.pan)&&angular.extend(u.pan,t.pan));var d=i(s,a);return s[d]=u,u}var r=t.isDefined,i=(t.isObject,t.obtainEffectiveGraphId),s={},u={getDefaults:n,getGraphCreationDefaults:a,setDefaults:o,reset:function(){s={}}};return u}angular.module("ngCytoscape").factory("cytoGraphDefaults",t),t.$inject=["cytoHelpers"]}(),function(){"use strict";function e(e){function t(e,t){var n,o;if(angular.isDefined(t))n=t;else if(0===Object.keys(e).length)n="cytoscape-main";else if(Object.keys(e).length>=1)for(o in e)e.hasOwnProperty(o)&&(n=o);else $log.error(a+"- You have more than 1 graph on the DOM, you must provide the graph ID to the cytoData.geGraph call");return n}function n(n,a){var o,r=t(n,a);return angular.isDefined(n[r])&&n[r].resolvedDefer!==!0?o=n[r].defer:(o=e.defer(),n[r]={defer:o,resolvedDefer:!1}),o}var a="[AngularJS - Cytoscape] ",o=angular.copy,r=o,i=function(e){return angular.isDefined(e)&&null!==e},s=function(e){return!i(e)};return{copy:o,clone:r,defaultTo:function(e,t){return i(e)?e:t},isTruthy:function(e){return"true"===e||e===!0},isEmpty:function(e){return 0===Object.keys(e).length},isUndefinedOrEmpty:function(e){return angular.isUndefined(e)||null===e||0===Object.keys(e).length},isDefined:i,isUndefined:s,isNumber:angular.isNumber,isString:angular.isString,isArray:angular.isArray,isObject:angular.isObject,isFunction:angular.isFunction,equals:angular.equals,safeApply:function(e,t){var n=e.$root.$$phase;"$apply"==n||"$digest"==n?e.$eval(t):e.$apply(t)},asyncEach:function(t,n,a,o){function r(){return(new Date).getTime()}function i(){for(var e=r();u>d&&r()-e<=a;)n.call(o,t[d],d,t),++d;u>d?setTimeout(i,1):d===u&&s.resolve()}var s=e.defer(),u=t.length;o=o||window,a=a||200;var d=0;return i(),s.promise},obtainEffectiveGraphId:t,getDefer:function(e,a){var o,r=t(e,a);return o=angular.isDefined(e[r])&&e[r].resolvedDefer!==!1?e[r].defer:n(e,a)},getUnresolvedDefer:n,setResolvedDefer:function(e,n){var a=t(e,n);e[a].resolvedDefer=!0}}}angular.module("ngCytoscape").service("cytoHelpers",e),e.$inject=["$q"]}(),function(){"use strict";function e(){return{random:{name:"random",fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0},preset:{name:"preset",positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0},grid:{name:"grid",fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0},circle:{name:"circle",fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0},concentric:{name:"concentric",fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0},breadthfirst:{name:"breadthfirst",fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0},cose:{name:"cose",ready:function(){},stop:function(){},animate:!1,animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,componentSpacing:100,nodeRepulsion:function(e){return 4e5},nodeOverlap:10,idealEdgeLength:function(e){return 10},edgeElasticity:function(e){return 100},nestingFactor:5,gravity:80,numIter:1e3,initialTemp:200,coolingFactor:.95,minTemp:1,useMultitasking:!0}}}function t(){function t(){return e()}var n={getDefaultLayouts:t};return n}angular.module("ngCytoscape").factory("cytoLayoutDefaults",t)}();